@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Font Faces ─────────────────────────────────────────────────────────── */
@font-face {
  font-family: "Geist Mono";
  src: url("/assets/fonts/GeistMono[wght].woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Sora";
  src: url("/assets/fonts/Sora[wght].woff2") format("woff2");
  font-weight: 100 800;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Bricolage Grotesque";
  src: url("/assets/fonts/BricolageGrotesque[opsz,wdth,wght].woff2") format("woff2");
  font-weight: 200 800;
  font-style: normal;
  font-display: swap;
}

/* ─── OKLCH Design Tokens ────────────────────────────────────────────────── */
@layer base {
  :root {
    --radius: 0.5rem;

    /* Dark terminal theme – active only in dark mode (applied globally) */
    --background:    0.11 0.008 260;
    --foreground:    0.94 0.01 260;

    --card:          0.15 0.01 260;
    --card-foreground: 0.94 0.01 260;

    --popover:       0.18 0.012 260;
    --popover-foreground: 0.94 0.01 260;

    /* Electric cyan primary */
    --primary:       0.72 0.18 210;
    --primary-foreground: 0.11 0.008 260;

    --secondary:     0.20 0.015 260;
    --secondary-foreground: 0.85 0.01 260;

    --muted:         0.20 0.012 260;
    --muted-foreground: 0.58 0.02 260;

    --accent:        0.72 0.18 210;
    --accent-foreground: 0.11 0.008 260;

    /* Destructive: red */
    --destructive:   0.65 0.22 25;
    --destructive-foreground: 0.98 0 0;

    --border:        0.28 0.015 260;
    --input:         0.22 0.012 260;
    --ring:          0.72 0.18 210;

    /* Charts */
    --chart-1:       0.72 0.18 210;   /* cyan */
    --chart-2:       0.72 0.19 155;   /* emerald */
    --chart-3:       0.78 0.19 80;    /* amber */
    --chart-4:       0.65 0.22 25;    /* red */
    --chart-5:       0.65 0.20 310;   /* violet */

    /* Sidebar (unused but required) */
    --sidebar:       0.13 0.009 260;
    --sidebar-foreground: 0.94 0.01 260;
    --sidebar-primary: 0.72 0.18 210;
    --sidebar-primary-foreground: 0.11 0.008 260;
    --sidebar-accent: 0.20 0.015 260;
    --sidebar-accent-foreground: 0.85 0.01 260;
    --sidebar-border: 0.28 0.015 260;
    --sidebar-ring:  0.72 0.18 210;

    /* StockSense custom tokens */
    --cyan:          0.72 0.18 210;
    --cyan-dim:      0.35 0.10 210;
    --emerald:       0.72 0.19 155;
    --emerald-dim:   0.30 0.09 155;
    --amber:         0.78 0.19 80;
    --amber-dim:     0.35 0.10 80;
    --crimson:       0.65 0.22 25;
    --crimson-dim:   0.28 0.10 25;
    --surface-0:     0.11 0.008 260;
    --surface-1:     0.15 0.01 260;
    --surface-2:     0.20 0.015 260;
    --surface-3:     0.25 0.018 260;
  }

  /* ─── Apply dark mode globally ──────────────────────────────────────────── */
  html {
    color-scheme: dark;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: "Sora", system-ui, sans-serif;
    font-feature-settings: "kern" 1, "liga" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* ─── Utility classes ────────────────────────────────────────────────────── */
@layer utilities {
  /* Scanline texture for cards */
  .scanlines {
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      oklch(0 0 0 / 0.04) 2px,
      oklch(0 0 0 / 0.04) 4px
    );
  }

  /* Glow effects */
  .glow-cyan {
    box-shadow: 0 0 12px oklch(0.72 0.18 210 / 0.35), 0 0 40px oklch(0.72 0.18 210 / 0.12);
  }
  .glow-emerald {
    box-shadow: 0 0 12px oklch(0.72 0.19 155 / 0.35), 0 0 40px oklch(0.72 0.19 155 / 0.12);
  }
  .glow-amber {
    box-shadow: 0 0 12px oklch(0.78 0.19 80 / 0.35), 0 0 40px oklch(0.78 0.19 80 / 0.12);
  }
  .glow-red {
    box-shadow: 0 0 12px oklch(0.65 0.22 25 / 0.5), 0 0 40px oklch(0.65 0.22 25 / 0.2);
  }

  /* Terminal text */
  .font-terminal {
    font-family: "Geist Mono", "Courier New", monospace;
  }

  /* Noise grain overlay */
  .grain-overlay::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
    pointer-events: none;
    border-radius: inherit;
    z-index: 0;
  }
}

/* ─── Animations ─────────────────────────────────────────────────────────── */
@keyframes pulse-urgency {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 6px oklch(0.65 0.22 25 / 0.7), 0 0 20px oklch(0.65 0.22 25 / 0.4);
  }
  50% {
    opacity: 0.85;
    box-shadow: 0 0 14px oklch(0.65 0.22 25 / 0.9), 0 0 40px oklch(0.65 0.22 25 / 0.6);
  }
}

@keyframes pulse-amber {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 6px oklch(0.78 0.19 80 / 0.7), 0 0 20px oklch(0.78 0.19 80 / 0.3);
  }
  50% {
    opacity: 0.9;
    box-shadow: 0 0 14px oklch(0.78 0.19 80 / 0.9), 0 0 40px oklch(0.78 0.19 80 / 0.5);
  }
}

@keyframes scan-sweep {
  0%   { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

@keyframes blink-dot {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.2; }
}

@keyframes data-refresh {
  0%   { opacity: 0.4; transform: scaleX(0); }
  50%  { opacity: 1;   transform: scaleX(1); }
  100% { opacity: 0.4; transform: scaleX(0); }
}

.animate-urgency {
  animation: pulse-urgency 1.5s ease-in-out infinite;
}

.animate-amber-pulse {
  animation: pulse-amber 2s ease-in-out infinite;
}

.animate-blink {
  animation: blink-dot 1.2s ease-in-out infinite;
}

/* ─── Scrollbar ──────────────────────────────────────────────────────────── */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: oklch(0.15 0.01 260);
}
::-webkit-scrollbar-thumb {
  background: oklch(0.30 0.015 260);
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: oklch(0.40 0.02 260);
}

/* ─── Accordion (override for transparency) ─────────────────────────────── */
.stock-accordion [data-state] {
  background: transparent;
}
